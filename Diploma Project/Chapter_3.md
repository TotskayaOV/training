# Глава 3. СУБД

## 3.1 Сравнение распространенных СУБД 

СУБД бывают разых типов:

* Ключ-значение

* Реляционные

* Документные

* Графовые

* Колоночные

Документные СУБД и СУБД типа ключ-значение подходят для хранения не структурируемыч данныч, или наоборот для очень простыч структур типа ключ-значение. 

Наиболее известные СУБД таких типов - Redis, Memcached, CouchDB, MongoDB, Amazon DocumentDB. 

Ключ_значение:
один из самых простых типов СУБД. В упрощенном виде, это некая таблица с уникальным ключом и собственно связанным с ним значением, в котором может быть что угодно. Чаще всего такие СУБД используют для кэширования, т.к. они очень быстро работают, а это и не сложно, когда есть уникальный ключ, и запрос возвращает только одно значение. У некоторых представителей данных СУБД есть возможность работать полностью в памяти, а так же есть возможность задавать срок жизни записи, после истечения которого, записи будут автоматически удаляться.

Документные:
СУБД, где основной единицей логической модели данных является документ - структурированный текст, с определенным синтаксисом. базы данных документов только сохраняют состояние, но не поведение.

Графовые СУБД - специфичный тип, предназначены для работы с графами, с их узлами, свойствами, и произвольными отношениями между узлами. Данные виды СУБД обычно используют для подобий социальных сетей, систем оценок и рекомендаций

Известные представители этого типа субд - Neo4j, Amazon Neptune, InfiniteGraph, InfoGrid.

Колоночные СУБД
Колоночные СУБД очень похожи на реляционные. Они так же состоят из строк, которые имеют атрибуты, а строки группируются в таблицах. Различия в логических моделях несущественные, а вот на уровне физического хранения данных различия значительные.

В реляционных СУБД данные хранятся "построчно", это означает что для считывания значения определенной колонки, придется прочитать практически всю строку, как минимум от первой до нужной колонки. В колоночной СУБД данные хранятся "поколоночно", т.е. колонка - это как отдельная таблица. Соответственно чтение будет происходить из конкретного столбца сразу.

Основные преимущества колоночных СУБД – эффективное выполнения сложных аналитических запросов на больших объемах, и легкое, практически мгновенное, изменение структуры таблиц с данными, плюс существенная компрессия и сжатие, которое позволяет значительно экономить место.

Яркие представители колоночных СУБД - Sybase IQ (ныне SAP IQ), Vertica, ClickHouse, Google BigTable, InfoBright, Cassandra.

Учитывая специфику колоночных СУБД, будет не эффективно ее использовать, если выборки достаточно простые, параметры выборки статичны, и если преобладают выборки по ключевым значениям. Так же, если количество строк в таблице, из которой делается выборка, меньше сотен миллионов строк, то скорее всего не будет большого преимущества, по сравнению с реляционной СУБД.

Реляционные СУБД

Классические, реляционные СУБД чаще всего используются для построения решений OLTP (Online Transaction Processing). В таких решениях СУБД работает с небольшими по размерам транзакциями, но идущими большим потоком, и при этом от системы требуется минимальное время отклика, а так же возможность, при определенных условиях, отменить любые изменения выполняемых в рамках транзакции. Если вы строите систему, в рамках которой требуется хранить значительное количество сущностей (таблиц), с различными типами связей между ними (один-к-одному, один-к-многим, многие-ко-многим), то это скорее всего про реляционные СУБД.

Наиболее известные СУБД такого типа - Oracle, Microsoft SQL, PostgreSQL, MySQL.

Реляционная база данных - это тип хранилища данных, упорядочивающего данные в таблицы, связанные друг с другом [3]. Структурированный язык запросов является основой этих систем, поскольку используется для связи и управления. СУБД имеют предопределенную схему, то есть данные хранятся в строках (записях) и столбцах (атрибутах) со строгой структурой. Каждая запись обычно содержит значение для каждого атрибута, что приводит к четким зависимостям между различными точками данных.
Реляционные базы обычно масштабируются по вертикали, что означает, что данные хранятся на одном сервере, а масштабирование выполняется путем добавления большего количества ресурсов (CPU, GPU и оперативной памяти). Однако переключение с небольших машин на более крупные может приводить к простою. Масштабирование между несколькими серверами (горизонтальное масштабирование) может оказаться сложной задачей, поскольку для этого потребуются изменения структуры данных и дополнительные инженерные усилия.
Реляционные базы данных демонстрируют высокую производительность при интенсивных операциях чтения/записи с небольшими и средними наборами данных. Они также обеспечивают повышенную скорость поиска данных за счет добавления индексов в поля данных для запросов и объединения таблиц. Однако при увеличении объема данных и запросов пользователей производительность может снизиться.

## 3.2 Выбор СУБД в заивисимости от поставленных задач

При просмотре объектов базы данных (как, например, показано здесь), вы сразу заметите, что база данных содержит одну или несколько именованных схем, которые в свою очередь содержат таблицы.
 
Схема базы данных (Database Schema) — это именованная коллекция таблиц. Схема также может содержать представления, индексы, последовательности, типы данных, операторы и функции. Схемы аналогичны каталогам на уровне операционной системы, за исключением того, что схемы не могут быть вложенными.

Одно и то же имя объекта можно свободно использовать в разных схемах, например, и schema1, и schema2 могут содержать таблицы с именем mytable.

Цели использования схем:

объединение объектов базы данных в логические группы для облегчения управления ими;
работа разных приложений с одной БД без конфликтов имён;
независимая работа несколько пользователей с одной БД.
Констрейнты
Констрейнты (constraint) — это правила, применяемые к столбцам данных таблицы. Они используются, чтобы ограничить типы и значения данных, которые могут храниться в таблице. Это дает возможность привязать возможные значения таблицы к бизнес-правилу: например, указать, что цены товаров могут быть только положительными, даже если тип данных теоретически допускает отрицательные значения. Если пользователь попытается сохранить значение, нарушающее указанные ограничения, возникнет ошибка. 